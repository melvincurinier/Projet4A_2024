# Carte

## Présentation des fonctions

La carte permet de représenter le trafic routier en lisant les fichiers proposés par l'utilisateur ou grâce aux informations stockées en base de données. Les fonctions utilisées pour lire les fichiers et afficher le trafic sont les suivantes :

| **Nom fonction**       | **Prototype**                                                                                                                                                                                                             | **Description courte**                                                                                                                                                                                                |
|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ngAfterViewInit        | ngAfterViewInit()                                                                                                                                                                                                         | Permet des modifications de la map après son initialisation, notamment lorsque la latitude ou la longitude changent ou quand l'utilisateur affiche le trafic routier                                                  |
| initMap                | initMap()                                                                                                                                                                                                                 | Initialise la carte en demandant notamment à l'utilisateur s'il veut afficher sa position, et ajoute une mention de copyright sur la map                                                                              |
| drawLine               | drawLine(centrelat: number, centrelong: number, calculatedLat: any, calculatedLong: any, couleur: any, direction: string, descriptionColor: string, numberRecColor: string, tabLatitudeRecSW: any, tabLatitudeRecNE: any) | Ajoute une flèche aux coordonnées indiquées, et lui attribue un popup contenant des informations telles que sa direction et son type (Emerging, Decreasing, etc)                                                      |
| clearMap               | clearMap()                                                                                                                                                                                                                | Appelle les 3 fonctions supprimant l'ensemble des formes dessinées sur la map                                                                                                                                         |
| clearRectangles        | clearRectangles()                                                                                                                                                                                                         | Supprime chaque rectangle dessiné sur la map                                                                                                                                                                          |
| clearArrow             | clearArrow()                                                                                                                                                                                                              | Supprime chaque flèche dessinée sur la map                                                                                                                                                                            |
| clearColor             | clearColor()                                                                                                                                                                                                              | Supprime chaque rectangle de couleur créé par la fonction areaColorTraitementSeq                                                                                                                                      |
| areaTraitement         | areaTraitement(lines: string[], _callback: function)                                                                                                                                                                      | Crée des zones en fonction des informations données dans le tableau mis en argument                                                                                                                                   |
| areaColorTraitement    | areaColorTraitement(lines: string[], cb: function)                                                                                                                                                                        | Personnalise les couleurs des zones en fonction des informations données dans le tableau mis en argument                                                                                                              |
| areaTraitementSeq      | areaTraitementSeq(lines: string[], _callback: function)                                                                                                                                                                   | Fonctionne de la même manière que areaTraitement, mais n'assigne pas de popup aux zones créées                                                                                                                        |
| areaColorTraitementSeq | areaColorTraitementSeq(lines: string[], cb: function)                                                                                                                                                                     | Appelle la fonction drawLine pour afficher des flèches dans les zones créées par areaTraitement, ou crée de nouvelles zones de couleur si certaines lignes du tableau mis en argument ne comportent pas de directions |